[{"path":"https://mrc-ide.github.io/twinkle/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 Imperial College London Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://mrc-ide.github.io/twinkle/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Wes Hinsley. Author, maintainer. Rich FitzJohn. Author. Imperial College Science, Technology Medicine. Copyright holder.","code":""},{"path":"https://mrc-ide.github.io/twinkle/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Hinsley W, FitzJohn R (2025). twinkle: Provision Shiny Applications. R package version 2.0.2.","code":"@Manual{,   title = {twinkle: Provision Shiny Applications},   author = {Wes Hinsley and Rich FitzJohn},   year = {2025},   note = {R package version 2.0.2}, }"},{"path":"https://mrc-ide.github.io/twinkle/index.html","id":"twinkle","dir":"","previous_headings":"","what":"Provision Shiny Applications","title":"Provision Shiny Applications","text":"twinkle package designed help manage set shiny applications. package actually contain shiny-specific code mostly helps: fetch code github (possibly private repository) build application-specific libraries app runs relative isolation synchronise app sources library directory trees can contain staging “production” instances","code":""},{"path":"https://mrc-ide.github.io/twinkle/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Provision Shiny Applications","text":"primary use system docker container part deployment acting load balanced shiny server. , three services: apache presents interface world looks https, haproxy acts load balancer several (one many) copies shiny, capable serving every application. like setup, compared something like shinyproxy balancing occurs applications multiple users appliation compete (least used case). experience, multiple users tend correlate application, e.g., running workshop launching app related new publication. reasonably agnostic deployments configured, actual configuration fairly basic; see shiny-dide full example using docker compose minimal configuration three services , deployed shiny.dide.ic.ac.uk imagine persistant storage (docker volume) holding data applications; shiny serve also persistant storage need order set applications . mrc-ide/twinkle container contains cli application twinkle can perform simple administrative commands based configuration describes applications.","code":"<apache> -- <haproxy> -- <shiny...>"},{"path":"https://mrc-ide.github.io/twinkle/index.html","id":"configuration","dir":"","previous_headings":"","what":"Configuration","title":"Provision Shiny Applications","text":"configuration yaml, valid top-level key apps. list objects, representing application name anme application. simple configuration look like: contains single application served /myapp, find github.com/alice/alices-app valid fields within application : username (required): github user organisational name holds sources repo (required): name repository within username namespace github branch: optionally branch deploy. default use default branch github (.e., one see navigate github landing page branch checked default clone) subdir: subdirectory within repo application can found. reasonably common application might found somewhere root; packages often use inst/app sometimes shiny app part larger repository. application can stored anywhere within repo, may reference files subdirectory runs private: boolean indicating repository private. , need add deploy key repository order clone ssh script: optional script run app sync-ed destination (either staging production). intention use script apps installed directory read-app runtime, case shiny-dide can safely run many workers tree. causes issues convenient code application perform calculation cloning running. Examples seen used (used) : downloading data able stored git repository prerending rmarkdown use learnr Note (least present) script run separately sync staging production, ideally script deterministic see slightly different results. possible change things allow sync production occur staging (rather sources) requires always update source/lib, staging, production.","code":"apps:   myapp:     username: alice     repo: alices-app     branch: main"},{"path":"https://mrc-ide.github.io/twinkle/index.html","id":"packages","dir":"","previous_headings":"","what":"Packages","title":"Provision Shiny Applications","text":"Applications depend number packages order run. indicated within application root repository (repository root subdir used, within subdir otherwise). applications can use pkgdepends.txt format supported conan, used hipercow. See docs details. Typically simply file pkgdepends.txt application root, line name package github specification like mrc-ide/malariasimulation@v1.6.0, example: actual package installation performed pkgdepends. Alternatively, can use script conan.R install packages within however want. useful cases pkgdepends failing resolve things need manually override bits dependency resolution failing get right. Finally, support legacy provision.yml files used original shiny server, don’t want new projects use method describe . pressing need migrate old projects, however. precedence order conan.R (highest precedence), pkgdepends.txt, provision.yml (lowest precedence).","code":"# Also use the mrc-ide universe repo::https://mrc-ide.r-universe.dev  # Specific version of malaria simulation, via a tag mrc-ide/malariasimulation@v1.6.0  # Package from CRAN coda"},{"path":"https://mrc-ide.github.io/twinkle/index.html","id":"interaction","dir":"","previous_headings":"","what":"Interaction","title":"Provision Shiny Applications","text":", assume exact setup used shiny-dide, assume system running (.e., docker compose ps shows services running). able run show available commands, mapping various steps deployment. , can: create-deploy-key: create deploy key private application; generates saves private key within persistant storage, prints public key instructions adding github. completed step can clone private repositories update-src: refresh server copy application source code install-packages: install packages application sync: push (updated) copies application source packages onto staging directory live copy application commands helpers: deploy wrapper around update-src, install-packages sync, designed use setting new application want iterate quickly list lists known applications delete removes files associated application","code":"$ ./twinkle --help Twinkle.  Usage:   twinkle create-deploy-key [--force] <name>   twinkle update-src [--branch=NAME] <name>   twinkle install-packages <name>   twinkle sync [--production] <name>   twinkle deploy [--production] <name>   twinkle list [<pattern>]   twinkle delete <name>  Options:   --branch=NAME   Github branch to use"},{"path":"https://mrc-ide.github.io/twinkle/index.html","id":"other-comments","dir":"","previous_headings":"","what":"Other comments","title":"Provision Shiny Applications","text":"assume three environment variables set TWINKLE_ROOT: points directory twinkle data stored. applications served found ${TWINKLE_ROOT}/apps staging applications ${TWINKLE_ROOT}/staging TWINKLE_LOGS: points location logs written TWINKLE_CONFIG: points location configuration shiny-dide setup, set compose file, bind-mounting configuration host using docker volume root, shared among workers. Practically, server configuration needs kept sync configuration, site_dir set ${TWINKLE_ROOT}/apps","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_delete_app.html","id":null,"dir":"Reference","previous_headings":"","what":"Delete an application — twinkle_delete_app","title":"Delete an application — twinkle_delete_app","text":"Delete application.  removes everything associated application (depending far deployment might ); real staging instances, library, deploy key (private) source code.  might want use deleting application longer needed, something untoward happened convenient start clean state.","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_delete_app.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Delete an application — twinkle_delete_app","text":"","code":"twinkle_delete_app(name, production = FALSE)"},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_delete_app.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Delete an application — twinkle_delete_app","text":"name Name application within twinkle configuration. check application actually exists within configuration (indeed even read configuration ) application deletion might removed configuration already. production Logical, indicating additionally delete production . Otherwise production left alone. allows totally redeploy application leave running happy version, sync place.","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_delete_app.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Delete an application — twinkle_delete_app","text":"Nothing","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_deploy.html","id":null,"dir":"Reference","previous_headings":"","what":"ALl-in-one deploy — twinkle_deploy","title":"ALl-in-one deploy — twinkle_deploy","text":"--one deployment.  Runs steps (update source, install packages sync staging possibly production). intended either initial setup application full update.  control use individual functions twinkle_update_src(), twinkle_install_packages() twinkle_sync()","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_deploy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"ALl-in-one deploy — twinkle_deploy","text":"","code":"twinkle_deploy(name, production = FALSE)"},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_deploy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"ALl-in-one deploy — twinkle_deploy","text":"name Name application within twinkle configuration. check application actually exists within configuration (indeed even read configuration ) application deletion might removed configuration already. production Deploy production (addition staging)","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_deploy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"ALl-in-one deploy — twinkle_deploy","text":"Nothing","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_deploy_key.html","id":null,"dir":"Reference","previous_headings":"","what":"Show or create a deploy key — twinkle_deploy_key","title":"Show or create a deploy key — twinkle_deploy_key","text":"Show (needed, create recreate) deploy key private application.  Instructions printed explain add key repository.  can multiple deploy keys repository.","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_deploy_key.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Show or create a deploy key — twinkle_deploy_key","text":"","code":"twinkle_deploy_key(name, recreate = FALSE)"},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_deploy_key.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Show or create a deploy key — twinkle_deploy_key","text":"name Name application within twinkle configuration recreate Logical, indicating create key even already exists.","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_deploy_key.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Show or create a deploy key — twinkle_deploy_key","text":"Invisibly, public key string","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_history.html","id":null,"dir":"Reference","previous_headings":"","what":"Show application history — twinkle_history","title":"Show application history — twinkle_history","text":"Show history application","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_history.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Show application history — twinkle_history","text":"","code":"twinkle_history(name)"},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_history.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Show application history — twinkle_history","text":"name Name application","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_history.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Show application history — twinkle_history","text":"Nothing","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_install_packages.html","id":null,"dir":"Reference","previous_headings":"","what":"Install app packages — twinkle_install_packages","title":"Install app packages — twinkle_install_packages","text":"Install packages app","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_install_packages.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Install app packages — twinkle_install_packages","text":"","code":"twinkle_install_packages(name)"},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_install_packages.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Install app packages — twinkle_install_packages","text":"name Name app","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_install_packages.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Install app packages — twinkle_install_packages","text":"Invisibly, list containing sha installation based conan installation id installation","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_list.html","id":null,"dir":"Reference","previous_headings":"","what":"List apps — twinkle_list","title":"List apps — twinkle_list","text":"List known apps config","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List apps — twinkle_list","text":"","code":"twinkle_list(pattern = NULL)"},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List apps — twinkle_list","text":"pattern Optional pattern search (regular expression)","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_list.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List apps — twinkle_list","text":"character vector","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_logs.html","id":null,"dir":"Reference","previous_headings":"","what":"List of view logs — twinkle_logs","title":"List of view logs — twinkle_logs","text":"List view logs shiny server.","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_logs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List of view logs — twinkle_logs","text":"","code":"twinkle_logs(name, list = FALSE, filename = NULL)"},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_logs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List of view logs — twinkle_logs","text":"name Name application list Logical, indicating list filenames log files, rather show last, particular, log file. filename Optional filename, show particular log. Otherwise print recent log.","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_logs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List of view logs — twinkle_logs","text":"character vector","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_restart.html","id":null,"dir":"Reference","previous_headings":"","what":"Restart an application — twinkle_restart","title":"Restart an application — twinkle_restart","text":"Tell shiny restart application.  trigger staging production versions.  needs done rarely, needed case library updated application source order force shiny pick new packages.","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_restart.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Restart an application — twinkle_restart","text":"","code":"twinkle_restart(name, production)"},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_restart.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Restart an application — twinkle_restart","text":"name Name application within twinkle configuration. check application actually exists within configuration (indeed even read configuration ) application deletion might removed configuration already. production Logical, indicating restart production version (rather staging version).","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_restart.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Restart an application — twinkle_restart","text":"Nothing","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_restart.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Restart an application — twinkle_restart","text":"work multiple applications present within directory!  need extend things knew different applications (either configuration file, applying heuristics source tree) touch file every sub application.  historically issue old odin/shiny shortcourse app, now obsolete.  can always restart server course.","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Query application status — twinkle_status","title":"Query application status — twinkle_status","text":"Query status application","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Query application status — twinkle_status","text":"","code":"twinkle_status(name)"},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Query application status — twinkle_status","text":"name Name application","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Query application status — twinkle_status","text":"Nothing","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_sync.html","id":null,"dir":"Reference","previous_headings":"","what":"Sync app — twinkle_sync","title":"Sync app — twinkle_sync","text":"Sync app library staging production shiny server.","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_sync.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sync app — twinkle_sync","text":"","code":"twinkle_sync(name, production, verbose = TRUE)"},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_sync.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sync app — twinkle_sync","text":"name Name app production Logical, indicating want update production instance.  FALSE, staging updated. verbose Logical, indicating output shown (passed system commands, otherwise hard capture output )","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_sync.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sync app — twinkle_sync","text":"named character vector ids repo (last SHA) library (conan id)","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_update_src.html","id":null,"dir":"Reference","previous_headings":"","what":"Update twinke app source — twinkle_update_src","title":"Update twinke app source — twinkle_update_src","text":"Update source twinkle application.","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_update_src.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Update twinke app source — twinkle_update_src","text":"","code":"twinkle_update_src(name, branch = NULL)"},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_update_src.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Update twinke app source — twinkle_update_src","text":"name Name app branch Optionally, branch use (e.g., testing branch staging).  overrides configuration within application.","code":""},{"path":"https://mrc-ide.github.io/twinkle/reference/twinkle_update_src.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Update twinke app source — twinkle_update_src","text":"Invisibly, sha HEAD repository","code":""}]
